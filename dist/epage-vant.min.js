/*!
 * epage-vant v0.1.1
 * (c) 2020-present Chengzi
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("epage"),require("vue")):"function"==typeof define&&define.amd?define("EpageVant",["epage","vue"],t):"object"==typeof exports?exports.EpageVant=t(require("epage"),require("vue")):e.EpageVant=t(e.Epage,e.Vue)}(window,function(e,t){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(t,n){t.exports=e},function(e,t,n){"use strict";function a(e,t,n,a,i,r,o,s){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),a&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),o?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},l._ssrRegister=c):i&&(c=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:l}}n.d(t,"a",function(){return a})},function(e,t,n){"use strict";var a=n(0),i=n.n(a);function r(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var{defaultSchema:o}=i.a.constant,{isArray:s}=i.a.helper;t.a={props:{schema:{type:Object,default:()=>o()}},computed:{store(){return this.$root.$options.extension.store},rootSchema:{get(){return this.store.getRootSchema()},set(e){this.store.initRootSchema(e)}},mode(){return this.store.getState().mode},model:{get(){return this.store.getModel()},set(e){this.store.setModel(e)}},rules(){var e=this.store.getFormRules(),t={},n={blur:"onBlur",change:"onChange"};for(var a in e){var i=e[a];s(i)&&(t[a]=i.map(e=>{var t={},{trigger:a,type:i}=e,o=r(e,["trigger","type"]);return a&&n[a]&&(t[a]=n[a]),Object.assign(t,o),t}))}return t}},methods:{event(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.$emit("on-event",this.schema.key,e,...n)}}}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),{ajax:r}=i.a.helper;t.a={data:()=>({worker:null}),computed:{options(){var{type:e,data:t,dynamicData:n}=this.schema.option,a=[];return"static"===e&&(a=t),"dynamic"===e&&(a=n),a}},mounted(){var{type:e}=this.schema.option;"static"!==e&&(this.worker=new i.a.Worker,this.listenerMessage(),this.getDynamicData())},methods:{listenerMessage(){this.worker.onmessage=(e=>{var{message:t,success:n,data:a}=e.data;if(n){var{key:i}=this.schema;this.store.updateWidgetOption(i,{dynamicData:a}),this.$emit("success",a)}else this.$emit("error",t);this.worker.terminate()})},getDynamicData(){var{url:e,adapter:t}=this.schema.option;e&&r(e).then(e=>{this.worker.postMessage({action:"fetch",data:e,fn:t})}).catch(e=>{this.$emit("error",{success:!1,message:e})})}}}},function(e,n){e.exports=t},function(e,t,n){"use strict";n.r(t),n.d(t,"viewExtend",function(){return a.a}),n.d(t,"Render",function(){return $}),n.d(t,"Epage",function(){return s.a}),n.d(t,"inputWidget",function(){return O}),n.d(t,"textareaWidget",function(){return C}),n.d(t,"inputNumberWidget",function(){return V}),n.d(t,"selectWidget",function(){return j}),n.d(t,"cascaderWidget",function(){return E}),n.d(t,"autoCompleteWidget",function(){return z}),n.d(t,"radioWidget",function(){return M}),n.d(t,"checkboxWidget",function(){return A}),n.d(t,"datePickerWidget",function(){return W}),n.d(t,"timePickerWidget",function(){return D}),n.d(t,"switchWidget",function(){return P}),n.d(t,"rateWidget",function(){return R}),n.d(t,"uploadWidget",function(){return F}),n.d(t,"lineWidget",function(){return q}),n.d(t,"gridWidget",function(){return T}),n.d(t,"buttonWidget",function(){return N});var a=n(2),i=n(4),r=n.n(i),o=n(0),s=n.n(o),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-form",{ref:"epForm",staticClass:"ep-widget-form",class:"ep-mode-"+e.mode,attrs:{"label-width":e.rootSchema.label.width,"label-position":e.rootSchema.label.position}},e._l(e.childrenSchema,function(t,a){return n("ep-widget-item",{directives:[{name:"show",rawName:"v-show",value:!t.hidden,expression:"!item.hidden"}],key:t.key,attrs:{schema:t,"flat-widgets":e.flatWidgets,"flat-schemas":e.flatSchemas,"root-schema":e.rootSchema},on:{"on-event":e.onEvent,"on-dynamic-add":e.onDynamicAdd,"on-dynamic-remove":e.onDynamicRemove}})}),1)};c._withStripped=!0;var l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ep-widget-item",class:e.cls,style:e.getStyle()},[e.schema.container?[e.schema.option?n("van-row",{attrs:{type:"flex",gutter:e.schema.option.gutter,align:e.schema.option.align,justify:e.schema.option.justify}},e._l(e.schema.children,function(t,a){return n("van-col",{key:a,attrs:{span:t.span,offset:t.offset}},[Array.isArray(t.list)?e._l(t.list,function(t,a){return n("ep-widget-item",{directives:[{name:"show",rawName:"v-show",value:!t.hidden,expression:"!child.hidden"}],key:t.key,attrs:{schema:t,"flat-widgets":e.flatWidgets,"flat-schemas":e.flatSchemas,"root-schema":e.rootSchema},on:{"on-event":e.onEvent,"on-dynamic-add":e.onDynamicAdd,"on-dynamic-remove":e.onDynamicRemove}})}):e._e()],2)}),1):e._e(),e.schema.description?n("div",{staticClass:"ep-widget-description"},[e._v(e._s(e.schema.description))]):e._e()]:[e.schema.help?n("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(e.schema.label))]):e._e(),n(e.flatWidgets[e.schema.widget].View,{tag:"component",attrs:{schema:e.schema},on:{"on-event":e.onEvent}}),e.schema.description?n("div",{staticClass:"ep-widget-description"},[e._v(e._s(e.schema.description))]):e._e()]],2)};l._withStripped=!0;var d={name:"EpWidgetItem",props:{schema:{type:Object,default:()=>({})},flatWidgets:{type:Object,default:()=>({})},flatSchemas:{type:Object,default:()=>({})},rootSchema:{type:Object,default:()=>({})}},computed:{store(){return this.$root.$options.extension.store},widgetType(){return this.schema.widget},cls(){return{"ep-widget-container":this.schema.container}},logics(){return this.rootSchema.logics},tab(){return this.store.getTab()}},methods:{onDynamicAdd(e){this.$emit("on-dynamic-add",e)},onDynamicRemove(e,t){this.$emit("on-dynamic-remove",e,t)},getStyle(){var e,{style:t}=this.schema;return t&&(e=Object.keys(t).filter(e=>t[e]).map(e=>"".concat(e,": ").concat(t[e],";")).join("")),e},onEvent(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];this.dispatchEvent(e,t),this.$emit("on-event",...arguments)},dispatchEvent(e,t){this.rootSchema.logics.filter(e=>e.key&&e.key===this.schema.key&&"event"===e.type).length&&this.store.updateWidgetByEvent(this.schema.key,t)}}},u=n(1),h=Object(u.a)(d,l,[],!1,null,null,null);h.options.__file="src/render/item.vue";var m=h.exports,{helper:p}=s.a,f=new s.a.Event,v={on:f.on.bind(f),off:f.off.bind(f),components:{EpWidgetItem:m},data:()=>({oldModel:{},oldDiffs:{},mode:"edit"}),computed:{childrenSchema(){var{store:e}=this.$root.$options.extension;return p.getRootSchemaChildren(e.getRootSchema())||[]},store(){return this.$root.$options.extension.store},$$store(){return this.$root.$options.extension.store.$$store},state(){return this.$$store.state},flatWidgets(){return this.store.getFlatWidgets()},flatSchemas(){return this.store.getFlatSchemas()},rootSchema(){return this.store.getRootSchema()},model(){return this.store.getModel()}},watch:{model:{handler:function(e,t){var n=this.diffModel(e,this.oldModel);this.shouldChangeModel(n,this.oldDiffs)&&(this.oldDiffs=Object.assign({},n),this.oldModel=Object.assign({},e),this.changeWithModel(n))},deep:!0}},created(){var{mode:e}=this.$root.$options.extension;e&&(this.mode=e,this.changeMode(e))},methods:{validateFields(){return new Promise((e,t)=>{this.$refs.epForm.validate(n=>{n?e(n):t(new Error("check error"))})})},shouldChangeModel(e,t){var n=!1;if(Object.keys(e).length)for(var a in e)a in t&&e[a]===t[a]||(n=!0);return n},diffModel(e,t){var n={};for(var a in e)a in this.flatSchemas&&e[a]!==t[a]&&(n[a]=e[a]);return n},changeWithModel(e){this.rootSchema.logics.filter(e=>e.key&&"value"===e.type).length&&this.store.updateWidgetByModel(e)},onEvent(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];this.$emit("on-event",...arguments);var r=0===t.indexOf("on-")?t.split("on-")[1]:t;e in f.$events&&r in f.$events[e]&&(f.$events[e][r]||[]).forEach(e=>{e(...a)})},onDynamicAdd(e){this.store.dynamicAddWidget(e.key)},onDynamicRemove(e,t){this.store.dynamicRemoveWidget(e.key,t)},changeMode(e){this.store.updateMode(e)}}},g=Object(u.a)(v,c,[],!1,null,null,null);g.options.__file="src/render/index.vue";var y=g.exports,{Store:w,Rule:_,helper:k}=s.a,{isArray:b,isFunction:S,isPlainObject:x}=k;class ${constructor(e){var{el:t,store:n,widgets:a=[],mode:i,schema:r,Rule:o}=e;this.el=t,this.mode=i||"edit",this.$$origin=null,this.store=null,n?(this.store=n,this.$$origin=this.render()):(this.store=new w({Rule:o||_}),b(a)?(this.store.initWidgets(a),x(r)&&this.store.initRootSchema(r),this.$$origin=this.render()):console.error("widgets must be an array")),this.on=y.on,this.off=y.off}render(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{el:t,store:n,mode:a}=this,i={store:n,mode:e.mode||a},o=document.createElement("div");return o.setAttribute("style","display:block;height: 100%;"),t.appendChild(o),new r.a({extension:i,el:o,render:e=>e(y)})}validateFields(){var{$children:e}=this.$$origin;if(b(e)&&e[0])return e[0].validateFields()}resetFields(){var{$children:e}=this.$$origin;if(b(e)&&e[0])return e[0].resetFields()}destroy(){this.$$origin&&S(this.$$origin.$destroy)&&(this.$$origin.$destroy(),this.$$origin.$off(),this.el.removeChild(this.$$origin.$el))}}var O=n(6),C=n(7),V=n(8),j=n(9),E=n(10),z=n(11),M=n(12),A=n(13),W=n(14),D=n(15),P=n(16),R=n(17),F=n(18),q=n(19),T=n(20),N=n(21);t.default=[{title:"Base",key:"base",widgets:[O,C,V,j,z,M,A,P,R,F,T,N]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"View",function(){return s}),n.d(t,"Setting",function(){return d}),n.d(t,"Schema",function(){return u});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ep-widget ep-widget-input"},["display"===e.mode?[e.schema.option.prefix?n("span",[e._v(e._s(e.schema.option.prefix))]):e._e(),n("span",[e._v(e._s(e.model[e.schema.key]))]),e.schema.option.suffix?n("span",[e._v(e._s(e.schema.option.suffix))]):e._e()]:[e.schema.key?n("van-field",{attrs:{type:e.schema.option.password?"password":"text",label:e.schema.label,placeholder:e.schema.placeholder,disabled:e.schema.disabled,size:e.rootSchema.size,rules:e.rules[e.schema.key],required:e.required},on:{input:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-input"].concat(a))},focus:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-focus"].concat(a))},blur:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-blur"].concat(a))},click:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-click"].concat(a))}},model:{value:e.model[e.schema.key],callback:function(t){e.$set(e.model,e.schema.key,"string"==typeof t?t.trim():t)},expression:"model[schema.key]"}}):e._e()]],2)};a._withStripped=!0;var i={extends:n(2).a,computed:{required(){var e=!1,t=this.schema.rules;return t[0]&&(e=t[0].required),e}}},r=n(1),o=Object(r.a)(i,a,[],!1,null,null,null);o.options.__file="src/widgets/input/View.vue";var s=o.exports,c=n(0),l=n.n(c),d=l.a.widget.input.Setting,u=l.a.widget.input.Schema},function(e,t,n){"use strict";n.r(t),n.d(t,"View",function(){return s}),n.d(t,"Setting",function(){return d}),n.d(t,"Schema",function(){return u});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ep-widget"},["display"===e.mode?[e.schema.option.prefix?n("span",[e._v(e._s(e.schema.option.prefix))]):e._e(),n("span",[e._v(e._s(e.model[e.schema.key]))]),e.schema.option.suffix?n("span",[e._v(e._s(e.schema.option.suffix))]):e._e()]:[e.schema.key?n("van-field",{attrs:{type:"textarea",rows:e.schema.option.rows,label:e.schema.label,placeholder:e.schema.placeholder,disabled:e.schema.disabled,size:e.rootSchema.size,rules:e.rules[e.schema.key],required:e.required},on:{input:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-input"].concat(a))},focus:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-focus"].concat(a))},blur:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-blur"].concat(a))},click:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-click"].concat(a))}},model:{value:e.model[e.schema.key],callback:function(t){e.$set(e.model,e.schema.key,"string"==typeof t?t.trim():t)},expression:"model[schema.key]"}}):e._e()]],2)};a._withStripped=!0;var i={extends:n(2).a,computed:{required(){var e=!1,t=this.schema.rules;return t[0]&&(e=t[0].required),e}}},r=n(1),o=Object(r.a)(i,a,[],!1,null,null,null);o.options.__file="src/widgets/textarea/View.vue";var s=o.exports,c=n(0),l=n.n(c),d=l.a.widget.textarea.Setting,u=l.a.widget.textarea.Schema},function(e,t,n){"use strict";n.r(t),n.d(t,"View",function(){return s}),n.d(t,"Setting",function(){return d}),n.d(t,"Schema",function(){return u});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ep-widget"},["display"===e.mode?[n("span",[e._v(e._s(e.model[e.schema.key]))])]:[e.schema.key?n("van-field",{attrs:{type:"number",min:e.schema.option.min,max:e.schema.option.max,step:e.schema.option.step,precision:e.schema.option.precision,placeholder:e.schema.placeholder,disabled:e.schema.disabled,size:e.rootSchema.size,rules:e.rules[e.schema.key],label:e.schema.label,required:e.required},on:{change:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-change"].concat(a))},focus:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-focus"].concat(a))},blur:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-blur"].concat(a))},click:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-click"].concat(a))}},model:{value:e.model[e.schema.key],callback:function(t){e.$set(e.model,e.schema.key,t)},expression:"model[schema.key]"}}):e._e()]],2)};a._withStripped=!0;var i={extends:n(2).a,computed:{required(){var e=!1,t=this.schema.rules;return t[0]&&(e=t[0].required),e}}},r=n(1),o=Object(r.a)(i,a,[],!1,null,null,null);o.options.__file="src/widgets/inputNumber/View.vue";var s=o.exports,c=n(0),l=n.n(c),d=l.a.widget.inputNumber.Setting,u=l.a.widget.inputNumber.Schema},function(e,t,n){"use strict";n.r(t),n.d(t,"View",function(){return l}),n.d(t,"Setting",function(){return h}),n.d(t,"Schema",function(){return m});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ep-widget"},["display"===e.mode?[n("span",[e._v(e._s(e.displayValue))])]:[n("van-field",{attrs:{readonly:"",clickable:"",label:e.schema.label,placeholder:e.schema.placeholder,value:e.model[e.schema.key]},on:{click:function(t){e.showPicker=!0}}}),n("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:e.columns},on:{cancel:function(t){e.showPicker=!1},confirm:e.onConfirm}})],1)]],2)};a._withStripped=!0;var i=n(2),r=n(3),o={extends:i.a,mixins:[r.a],data:()=>({showPicker:!1,columns:["北京","天津","南京","上海","深圳","成都","重庆","西双版纳"]}),computed:{displayValue(){var{multiple:e}=this.schema.option,t=this.model[this.schema.key],n=[];if(e)n=t?[]:t.map(e=>{var t=this.options.find(t=>t.key===e);return!!t&&t.value});else{var a=this.options.find(e=>e.key===t);n=void 0!==a?a.value:[]}return n+""}},methods:{onConfirm(e){this.model[this.schema.key]=e,this.showPicker=!1}}},s=n(1),c=Object(s.a)(o,a,[],!1,null,null,null);c.options.__file="src/widgets/select/View.vue";var l=c.exports,d=n(0),u=n.n(d),h=u.a.widget.select.Setting,m=u.a.widget.select.Schema},function(e,t,n){"use strict";n.r(t),n.d(t,"View",function(){return l}),n.d(t,"Setting",function(){return h}),n.d(t,"Schema",function(){return m});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ep-widget"},["display"===e.mode?[n("span",[e._v(e._s(e.displayValue))])]:[e.schema.key?n("Cascader",{attrs:{data:e.options,placeholder:e.schema.placeholder,disabled:e.schema.disabled,clearable:"",transfer:"",size:e.size,"render-format":e.renderFormat},on:{"on-change":function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-change"].concat(a))}},model:{value:e.model[e.schema.key],callback:function(t){e.$set(e.model,e.schema.key,"string"==typeof t?t.trim():t)},expression:"model[schema.key]"}}):e._e()]],2)};a._withStripped=!0;var i=n(2),r=n(3),o={extends:i.a,mixins:[r.a],computed:{size(){var e=this.schema.size||this.rootSchema.size;return"default"===e?void 0:e},displayValue(){var e=[],{delimiter:t="/"}=this.schema.option,n=this.model[this.schema.key];return this.findFinalValue(n,e,this.options),e.join(t)},options(){var{type:e,data:t,dynamicData:n}=this.schema.option,a=[];return"static"===e&&(a=t||[]),"dynamic"===e&&(a=n||[]),this.formatData(JSON.parse(JSON.stringify(a)))}},methods:{renderFormat(e){var t=this.schema.option.delimiter||"/";return e.join(t)},findFinalValue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(0!==e.length)for(var a of n)if(a.value===e[0])return t.push(a.label),this.findFinalValue(e.slice(1),t,a.children)},formatData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={value:"label",key:"value"};for(var n of e){for(var a in t)n[t[a]]=n[a];Array.isArray(n.children)?this.formatData(n.children):n.children=[]}return e}}},s=n(1),c=Object(s.a)(o,a,[],!1,null,null,null);c.options.__file="src/widgets/cascader/View.vue";var l=c.exports,d=n(0),u=n.n(d),h=u.a.widget.cascader.Setting,m=u.a.widget.cascader.Schema},function(e,t,n){"use strict";n.r(t),n.d(t,"View",function(){return h}),n.d(t,"Setting",function(){return m}),n.d(t,"Schema",function(){return p});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ep-widget"},["display"===e.mode?[n("span",[e._v(e._s(e.model[e.schema.key]))])]:[n("van-field",{staticClass:"epvan-autocomplete-field",attrs:{label:e.schema.label,type:"text",rules:e.rules[e.schema.key]},scopedSlots:e._u([{key:"input",fn:function(){return[n("input",{directives:[{name:"model",rawName:"v-model",value:e.model[e.schema.key],expression:"model[schema.key]"}],staticClass:"van-field__control",attrs:{placeholder:e.schema.placeholder},domProps:{value:e.model[e.schema.key]},on:{focus:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-focus"].concat(a))},blur:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-blur"].concat(a))},input:[function(t){t.target.composing||e.$set(e.model,e.schema.key,t.target.value)},e.onInput]}}),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.list.length,expression:"list.length"}],staticClass:"epvan-autocomplete-options"},e._l(e.list||[],function(t,a){return n("li",{key:a+"-",attrs:{value:t},on:{click:function(n){return e.onSelect(t)}}},[e._v(e._s(t))])}),0)]},proxy:!0}])})]],2)};a._withStripped=!0;var i=n(0),r=n.n(i),o=n(2),{ajax:s,debounce:c}=r.a.helper,l={extends:o.a,data:()=>({list:[],searchValue:"",worker:null}),mounted(){this.worker=new r.a.Worker,this.listenerMessage()},destroyed(){this.worker.terminate()},methods:{onInput(e){this.onSearch("search",e.target.value),console.log(e)},onSelect(e){this.event("on-select",e),this.store.updateModel({[this.schema.key]:e}),this.list=[]},listenerMessage(){this.worker.onmessage=(e=>{var{message:t,success:n,data:a}=e.data;if(n){var{key:i}=this.schema;this.store.updateWidgetOption(i,{dynamicData:a}),this.$emit("success",a),this.list=(a||[]).filter(e=>(e+="")&&e.indexOf(this.searchValue)>-1)}else this.$emit("error",t)})},onSearch(e,t){this.searchValue=t,this.event(e,t);var{type:n,data:a,url:i,adapter:r}=this.schema.option,o=[];"static"===n?o=a.filter(e=>(e+="")&&e.indexOf(t)>-1):"dynamic"===n&&i&&t.trim()&&this.getDynamicData(i,t,r,this),this.list=o},getDynamicData:c((e,t,n,a)=>{s("".concat(e).concat(t)).then(e=>{(void 0).worker.postMessage({action:"fetch",data:e,fn:n})}).catch(e=>{a.$emit("error",{success:!1,message:e})})},1e3)}},d=n(1),u=Object(d.a)(l,a,[],!1,null,null,null);u.options.__file="src/widgets/autoComplete/View.vue";var h=u.exports,m=r.a.widget.autoComplete.Setting,p=r.a.widget.autoComplete.Schema},function(e,t,n){"use strict";n.r(t),n.d(t,"View",function(){return l}),n.d(t,"Setting",function(){return h}),n.d(t,"Schema",function(){return m});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ep-widget"},["display"===e.mode?[n("span",[e._v(e._s(e.displayValue))])]:[n("van-field",{attrs:{name:e.schema.name,label:e.schema.label,rules:e.rules[e.schema.key]},scopedSlots:e._u([{key:"input",fn:function(){return[e.schema.key?n("van-radio-group",{attrs:{disabled:e.schema.disabled,size:e.schema.size||e.rootSchema.size,direction:e.schema.option.direction},on:{change:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-change"].concat(a))}},model:{value:e.model[e.schema.key],callback:function(t){e.$set(e.model,e.schema.key,t)},expression:"model[schema.key]"}},e._l(e.options||[],function(t,a){return n("van-radio",{key:t.key,attrs:{name:t.key}},[e._v(e._s(t.value))])}),1):e._e()]},proxy:!0}])})]],2)};a._withStripped=!0;var i=n(2),r=n(3),o={extends:i.a,mixins:[r.a],computed:{displayValue(){var e=this.model[this.schema.key];return this.options.filter(t=>t.key===e).map(e=>e.value)+""}}},s=n(1),c=Object(s.a)(o,a,[],!1,null,null,null);c.options.__file="src/widgets/radio/View.vue";var l=c.exports,d=n(0),u=n.n(d),h=u.a.widget.radio.Setting,m=u.a.widget.radio.Schema},function(e,t,n){"use strict";n.r(t),n.d(t,"View",function(){return l}),n.d(t,"Setting",function(){return h}),n.d(t,"Schema",function(){return m});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ep-widget"},["display"===e.mode?[n("span",[e._v(e._s(e.displayValue))])]:[n("van-field",{attrs:{name:e.schema.name,label:e.schema.label,rules:e.rules[e.schema.key]},scopedSlots:e._u([{key:"input",fn:function(){return[e.schema.key?n("van-checkbox-group",{attrs:{direction:e.schema.option.direction},on:{change:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-change"].concat(a))}},model:{value:e.model[e.schema.key],callback:function(t){e.$set(e.model,e.schema.key,t)},expression:"model[schema.key]"}},e._l(e.options||[],function(t,a){return n("van-checkbox",{key:a,attrs:{disabled:e.schema.disabled,name:t.key,shape:"square"}},[e._v(e._s(t.value))])}),1):e._e()]},proxy:!0}])})]],2)};a._withStripped=!0;var i=n(2),r=n(3),o={extends:i.a,mixins:[r.a],computed:{displayValue(){var e=this.model[this.schema.key];return(e?e.map(e=>{var t=this.options.find(t=>t.key===e);return!!t&&t.value}):[])+""}}},s=n(1),c=Object(s.a)(o,a,[],!1,null,null,null);c.options.__file="src/widgets/checkbox/View.vue";var l=c.exports,d=n(0),u=n.n(d),h=u.a.widget.checkbox.Setting,m=u.a.widget.checkbox.Schema},function(e,t,n){"use strict";n.r(t),n.d(t,"View",function(){return m}),n.d(t,"Setting",function(){return p}),n.d(t,"Schema",function(){return f});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ep-widget"},["display"===e.mode?[n("span",[e._v(e._s(e.model[e.schema.key]))])]:[e.schema.key?n("DatePicker",{class:e.cls,attrs:{transfer:!0,disabled:e.schema.disabled,placeholder:e.schema.placeholder,size:e.schema.size||e.rootSchema.size,type:e.getType(),format:e.schema.option.format,value:e.model[e.schema.key]},on:{"on-change":e.onDateChange}}):e._e()]],2)};a._withStripped=!0;var i=n(2),r=n(0),o=n.n(r),{include:s}=o.a.helper,c=["HH:mm:ss","HH:mm","mm:ss"],l=["yyyy-MM","yyyy/MM"],d={extends:i.a,computed:{cls(){var e={},{option:t}=this.schema;if(t&&"datetimerange"===t.type){var n=this.schema.size||this.rootSchema.size||"default";e="ep-widget-datePicker-".concat(n)}return e}},methods:{onDateChange(e){var t=e;t!==this.store.getModel(this.schema.key)&&(this.store.updateModel({[this.schema.key]:t}),this.event("on-change",...arguments))},hasTime:e=>!!c.filter(t=>s(e,t)).length,isMonth:e=>!!l.filter(t=>s(e,t)).length&&!s(e,"dd"),getType(){var{option:e}=this.schema,{range:t,format:n}=e;return t?this.hasTime(n)?"datetimerange":"daterange":"yyyy"===n?"year":this.isMonth(n)?"month":this.hasTime(n)?"datetime":"date"}}},u=n(1),h=Object(u.a)(d,a,[],!1,null,null,null);h.options.__file="src/widgets/datePicker/View.vue";var m=h.exports,p=o.a.widget.datePicker.Setting,f=o.a.widget.datePicker.Schema},function(e,t,n){"use strict";n.r(t),n.d(t,"View",function(){return s}),n.d(t,"Setting",function(){return d}),n.d(t,"Schema",function(){return u});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ep-widget"},["display"===e.mode?[n("span",[e._v(e._s(e.model[e.schema.key]))])]:[e.schema.key?n("TimePicker",{attrs:{transfer:!0,type:e.type,format:e.schema.option.format,disabled:e.schema.disabled,placeholder:e.schema.placeholder,size:e.schema.size||e.rootSchema.size},on:{"on-change":function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-change"].concat(a))}},model:{value:e.model[e.schema.key],callback:function(t){e.$set(e.model,e.schema.key,t)},expression:"model[schema.key]"}}):e._e()]],2)};a._withStripped=!0;var i={extends:n(2).a,computed:{type(){return this.schema.option.range?"timerange":"time"}}},r=n(1),o=Object(r.a)(i,a,[],!1,null,null,null);o.options.__file="src/widgets/timePicker/View.vue";var s=o.exports,c=n(0),l=n.n(c),d=l.a.widget.timePicker.Setting,u=l.a.widget.timePicker.Schema},function(e,t,n){"use strict";n.r(t),n.d(t,"View",function(){return s}),n.d(t,"Setting",function(){return d}),n.d(t,"Schema",function(){return u});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ep-widget"},["display"===e.mode?[n("span",[e._v(e._s(e.model[e.schema.key]))])]:[n("van-field",{attrs:{name:e.schema.name,label:e.schema.label,rules:e.rules[e.schema.key]},scopedSlots:e._u([{key:"input",fn:function(){return[e.schema.key?n("van-switch",{attrs:{disabled:e.schema.disabled,size:e.schema.size||e.rootSchema.size},on:{change:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-change"].concat(a))}},model:{value:e.model[e.schema.key],callback:function(t){e.$set(e.model,e.schema.key,t)},expression:"model[schema.key]"}}):e._e()]},proxy:!0}])})]],2)};a._withStripped=!0;var i={extends:n(2).a},r=n(1),o=Object(r.a)(i,a,[],!1,null,null,null);o.options.__file="src/widgets/switch/View.vue";var s=o.exports,c=n(0),l=n.n(c),d=l.a.widget.switch.Setting,u=l.a.widget.switch.Schema},function(e,t,n){"use strict";n.r(t),n.d(t,"View",function(){return s}),n.d(t,"Setting",function(){return d}),n.d(t,"Schema",function(){return u});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ep-widget"},["display"===e.mode?[e.schema.key?n("van-rate",{attrs:{count:e.schema.option.count,"allow-half":e.schema.option.allowHalf,disabled:!0,size:e.schema.size||e.rootSchema.size},on:{change:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-change"].concat(a))}},model:{value:e.model[e.schema.key],callback:function(t){e.$set(e.model,e.schema.key,t)},expression:"model[schema.key]"}}):e._e()]:[n("van-field",{attrs:{name:e.schema.name,label:e.schema.label,rules:e.rules[e.schema.key]},scopedSlots:e._u([{key:"input",fn:function(){return[e.schema.key?n("van-rate",{attrs:{count:e.schema.option.count,"allow-half":e.schema.option.allowHalf,disabled:e.schema.disabled,size:e.schema.size||e.rootSchema.size},on:{change:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-change"].concat(a))}},model:{value:e.model[e.schema.key],callback:function(t){e.$set(e.model,e.schema.key,t)},expression:"model[schema.key]"}}):e._e()]},proxy:!0}])})]],2)};a._withStripped=!0;var i={extends:n(2).a},r=n(1),o=Object(r.a)(i,a,[],!1,null,null,null);o.options.__file="src/widgets/rate/View.vue";var s=o.exports,c=n(0),l=n.n(c),d=l.a.widget.rate.Setting,u=l.a.widget.rate.Schema},function(e,t,n){"use strict";n.r(t),n.d(t,"View",function(){return h}),n.d(t,"Setting",function(){return m}),n.d(t,"Schema",function(){return p});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ep-widget ep-widget-upload"},[n("van-field",{attrs:{name:e.schema.name,label:e.schema.label,rules:e.rules[e.schema.key]},scopedSlots:e._u([{key:"input",fn:function(){return[e.schema.key?n("van-uploader",{attrs:{accept:e.schema.option.accept,format:e._f("string2Array")(e.schema.option.format),action:e.schema.option.action,multiple:e.schema.option.multiple,"with-credentials":e.schema.option.withCredentials,"show-upload-list":!1,"max-size":e.schema.option.maxSize,headers:e.headers,data:e.schema.option.data,type:e.schema.option.type,name:e.schema.name,"before-upload":e.onBeforeUpload,"on-success":e.handleSuccessUpload,"on-error":e.handleUploadError,"on-format-error":e.handleUploadFormatError,"on-exceeded-size":e.handleSizeError}},[n("van-button",{attrs:{icon:"photo"}},[e._v(e._s(e.schema.placeholder))])],1):e._e(),e.schema.option.showUploadList?e._l(e.model[e.schema.key],function(t,a){return n("div",{key:"_"+a,staticClass:"ep-widget-upload-files"},[n("a",{staticClass:"ep-widget-upload-filename",attrs:{title:"点击下载"},on:{click:function(n){return e.getDownload(t.url,t.name)}}},[e._v(e._s(t.name))]),n("Icon",{staticClass:"ep-widget-upload-file-remove",attrs:{type:"ios-trash-outline",title:"删除当前文件"},nativeOn:{click:function(t){return t.stopPropagation(),e.handleRemoveFile(a)}}})],1)}):e._e()]},proxy:!0}])})],1)};a._withStripped=!0;var i=n(2),r=n(0),o=n.n(r),{isNotEmptyString:s,isArray:c}=o.a.helper,l={filters:{string2Array:e=>"string"==typeof e?e.split(","):e},extends:i.a,computed:{headers(){var e={},{headers:t}=this.schema.option;return c(t)&&t.forEach(t=>{s(t.key)&&s(t.value)&&(e[t.key.trim()]=t.value.trim())}),e}},methods:{onBeforeUpload(e){var t=this.store.getModel(),n=t[this.schema.key].length,a=this.schema.option.multiple;if(n&&!a)return this.$Message.error("不支持多文件上传"),!1;var i=t[this.schema.key].find(t=>e.name===t.name);if(n&&i)return this.$Message.error("不能重复上传"),!1;this.$emit("on-before-upload",...arguments)},handleSuccessUpload(e,t,n){var{adapter:a}=this.schema.option;try{var i=new Function("data",a)(e);if(!i.name||!i.url)return}catch(e){console.log("返回数据不对 需要做适配：".concat(e))}var r={name:i.name,url:i.url},o=this.model[this.schema.key]||[];o.push(r),this.store.updateModel({[this.schema.key]:[...o]}),this.$emit("on-upload-success",...arguments)},handleUploadError(e,t,n){e&&this.$emit("on-upload-error",...arguments)},handleUploadFormatError(e,t){this.$Message.warning({content:"仅支持 ".concat(this.schema.option.format," 格式文件的上传"),duration:4}),this.$emit("on-upload-format-error",...arguments)},handleRemoveFile(e){var t=this.model[this.schema.key];t.splice(e,1),this.store.updateModel({[this.schema.key]:t}),this.$emit("on-remove-file",...arguments)},handleSizeError(e,t){this.$Message.warning({content:"上传文件大小不能超过 ".concat(this.schema.option.maxSize," kb"),duration:5}),this.$emit("on-size-error",...arguments)},getDownload(e,t){this.$Message.info("文件已开始下载，请勿重复点击操作！"),fetch(e).then(e=>e.blob().then(e=>{this.funDownload(e,t)}))},funDownload(e,t){var n=document.createElement("a"),a=new Blob([e]);n.download=t,n.style.display="none",n.href=URL.createObjectURL(a),document.body.appendChild(n),n.click(),document.body.removeChild(n)}}},d=n(1),u=Object(d.a)(l,a,[],!1,null,null,null);u.options.__file="src/widgets/upload/View.vue";var h=u.exports,m=o.a.widget.upload.Setting,p=o.a.widget.upload.Schema},function(e,t,n){"use strict";n.r(t),n.d(t,"View",function(){return s}),n.d(t,"Setting",function(){return d}),n.d(t,"Schema",function(){return u});var a=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ep-widget",staticStyle:{position:"relative",height:"100%","min-height":"16px"}},[this.schema.key?t("div",{staticClass:"ep-widget-line",style:this.style}):this._e()])};a._withStripped=!0;var i={extends:n(2).a,computed:{style(){var{direction:e,hposition:t,vposition:n,length:a,thickness:i,type:r,color:o}=this.schema.option,s="".concat(i,"px ").concat(r," ").concat(o,";"),c="",l="";"horizontal"===e?(c="border-top",l="width: ".concat(a,"%;")):(c="border-left",l="height: ".concat(a,"%;"));var d={top:"top: 0;",middle:"top: 50%;transform: translate".concat("center"===n?"":"Y","(-50%);"),bottom:"bottom: 0;",left:"left: 1px;",center:"left: 50%;transform: translate".concat("middle"===t?"":"X","(-50%);"),right:"right: 1px;"};return"position: absolute;"+d[t]+d[n]+l+c+":"+s}}},r=n(1),o=Object(r.a)(i,a,[],!1,null,null,null);o.options.__file="src/widgets/line/View.vue";var s=o.exports,c=n(0),l=n.n(c),d=l.a.widget.line.Setting,u=l.a.widget.line.Schema},function(e,t,n){"use strict";n.r(t),n.d(t,"View",function(){return s}),n.d(t,"Setting",function(){return d}),n.d(t,"Schema",function(){return u});var a=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"ep-widget"})};a._withStripped=!0;var i={extends:n(2).a},r=n(1),o=Object(r.a)(i,a,[],!1,null,null,null);o.options.__file="src/widgets/grid/View.vue";var s=o.exports,c=n(0),l=n.n(c),d=l.a.widget.grid.Setting,u=l.a.widget.grid.Schema},function(e,t,n){"use strict";n.r(t),n.d(t,"View",function(){return s}),n.d(t,"Setting",function(){return d}),n.d(t,"Schema",function(){return u});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ep-widget"},[e.schema.key?n("van-button",{attrs:{icon:e.schema.option.icon,type:e.getType(),disabled:e.schema.disabled,size:e.getSize(),block:e.schema.option.long,plain:e.isGhost(),square:e.getShape().square,round:e.getShape().round},on:{click:function(t){for(var n=arguments.length,a=Array(n);n--;)a[n]=arguments[n];return e.event.apply(void 0,["on-click"].concat(a))}}},[e._v(e._s(e.schema.option.text))]):e._e()],1)};a._withStripped=!0;var i={extends:n(2).a,methods:{getType(){var{type:e}=this.schema.option;return"ghost"===e?"default":e},getSize(){var e=this.schema.size||this.rootSchema.size;return e&&"default"!==e?e:"normal"},getShape(){var{shape:e}=this.schema.option,t="circle"===e;return{square:!t,round:t}},isGhost(){var{type:e,ghost:t}=this.schema.option;return"ghost"===e||Boolean(t)}}},r=n(1),o=Object(r.a)(i,a,[],!1,null,null,null);o.options.__file="src/widgets/button/View.vue";var s=o.exports,c=n(0),l=n.n(c),d=l.a.widget.button.Setting,u=l.a.widget.button.Schema}])});